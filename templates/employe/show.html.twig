{% extends 'base.html.twig' %}
{% block extra_title %}Gestion des autorisations{% endblock %}

{% block body %}
    <main class="main-content">
        <div class="container-fluid">
            <!-- Header de la page -->
            <div class="d-flex justify-content-between align-items-center mb-4 mt-5">
                <h1 class="h3 fw-bold mb-0">Liste des employés</h1>
                <!-- Bouton pour ouvrir l'offcanvas -->
                <button id="createDevisBtn" class="btn btn-chart d-flex align-items-center fw-bold rounded-3"
                        type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasDevis"
                        aria-controls="offcanvasDevis">
                    <i class="bi bi-plus-circle-fill me-2"></i>
                    Créer un nouvel employé
                </button>
            </div>


            <!-- Tableau des devis -->
            <div class="card p-4 mt-5">
                <label class="card-body mt-5">
                    <h3>Permissions de {{ employe.user.email }}</h3>
                    <form
                        data-controller="permissions"
                        data-turbo-frame="permissions_frame"
                        action="{{ path('app_admin_user_edit', {id: employe.user.id}) }}"
                        method="post">

                        {% for permission in permissions %}
                            <label>
                                <input type="checkbox"
                                       name="permissions[]"
                                       value="{{ permission.id }}"
                                       class="form-check-input"
                                       {% if permission.id in userPermissionIds %}checked{% endif %}>
                                {{ permission.label }}
                            </label><br>
                        {% endfor %}

                        <button type="submit" class="btn btn-chart">Mettre à jour</button>
                    </form>

                </div>
            </div>
        </div>
    </main>
{% endblock %}

{% block extra_javascripts %}

{% endblock %}

